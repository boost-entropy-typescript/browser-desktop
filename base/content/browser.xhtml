#filter substitution
<?xml version="1.0"?>
# -*- Mode: HTML -*-
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- The "global.css" stylesheet is imported first to allow other stylesheets to
    override rules using selectors with the same specificity. This applies to
    both "content" and "skin" packages, which bug 1385444 will unify later. -->
<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>

<?xml-stylesheet href="chrome://dot/skin/browser.css" type="text/css"?>

<html id="main-window"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    xmlns="http://www.w3.org/1999/xhtml"
    data-l10n-id="browser-main-window-window-titles"
    data-l10n-args="{&quot;content-title&quot;:&quot;CONTENTTITLE&quot;}"
    data-l10n-attrs="data-content-title-default, data-content-title-private, data-title-default, data-title-private"
#ifdef XP_WIN
    chromemargin="0,2,2,2"
#else
    chromemargin="0,-1,-1,-1"
#endif
    tabsintitlebar="true"
    windowtype="navigator:browser"
    macanimationtype="document"
    macnativefullscreen="true"
    screenX="4" 
    screenY="4"
    sizemode="normal"
    retargetdocumentfocus="urlbar-input"
    scrolling="false"
    persist="screenX screenY width height sizemode"
>
    <head>
        <link rel="localization" href="branding/brand.ftl"/>
        <link rel="localization" href="dot/browser.ftl"/>
        <link rel="localization" href="browser/browserSets.ftl"/>

        <link rel="localization" href="browser/search.ftl"/>
        <link rel="localization" href="branding/brand.ftl"/>
        <link rel="localization" href="browser/branding/sync-brand.ftl"/>
        <link rel="localization" href="browser/branding/brandings.ftl"/>
        <link rel="localization" href="toolkit/global/textActions.ftl"/>
        <link rel="localization" href="browser/browser.ftl"/>
        <link rel="localization" href="browser/browserContext.ftl"/>
        <link rel="localization" href="browser/menubar.ftl"/>
        <link rel="localization" href="browser/protectionsPanel.ftl"/>
        <link rel="localization" href="browser/appmenu.ftl"/>
        <link rel="localization" href="browser/panelUI.ftl"/>
        <link rel="localization" href="preview/identityCredentialNotification.ftl"/>
        <link rel="localization" href="preview/interventions.ftl"/>
        <link rel="localization" href="browser/sidebarMenu.ftl"/>
        <link rel="localization" href="browser/allTabsMenu.ftl"/>
        <link rel="localization" href="browser/places.ftl"/>
        <link rel="localization" href="toolkit/printing/printUI.ftl"/>
        <link rel="localization" href="browser/tabbrowser.ftl"/>
        <link rel="localization" href="preview/firefoxSuggest.ftl"/>
        <link rel="localization" href="browser/toolbarContextMenu.ftl"/>
        <link rel="localization" href="browser/screenshots.ftl"/>
        <link rel="localization" href="browser/firefoxView.ftl"/>
        <link rel="localization" href="browser/webrtcIndicator.ftl"/>
        <link rel="localization" href="browser/originControls.ftl"/>
        <link rel="localization" href="browser/unifiedExtensions.ftl"/>

        <title data-l10n-id="browser-main-window-title"></title>

        <script>
            // Important utilities/globals for browser
            Services.scriptloader.loadSubScript("resource://dot/base/content/browser-utils.js", this);
        </script>
        <script>
            var { AppConstants } = ChromeUtils.importESModule(
                "resource://gre/modules/AppConstants.sys.mjs"
            );

            // Sets up DevTools connection for debugging if in a non-release build
            if (!AppConstants.MOZILLA_OFFICIAL) {
                Services.scriptloader.loadSubScript(
                    "resource://dot/base/content/browser-development-helpers.js", 
                    this
                );

                document.documentElement.removeAttribute("remotecontrol");
            }

            Services.scriptloader.loadSubScript("resource://dot/base/content/browser-elements.js", this);
            Services.scriptloader.loadSubScript("resource://dot/base/content/browser-compat.js", this);
            Services.scriptloader.loadSubScript("resource://dot/base/content/browser-init.js", this);

            window.addEventListener(
                "MozBeforeInitialXULLayout",
                dBrowserInit.onBeforeInitialXULLayout.bind(dBrowserInit),
                { once: true }
            );

            window.addEventListener("DOMContentLoaded", dBrowserInit.onDOMContentLoaded.bind(dBrowserInit), {
                once: true
            });

            /* Initialise events */
            window.addEventListener("load", dBrowserInit.onLoad.bind(dBrowserInit));
            window.addEventListener("unload", dBrowserInit.onUnload.bind(dBrowserInit));
            window.addEventListener("close", dBrowserInit.onWindowClosing);
        </script>
    </head>

    <html:body xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
        #include main-popupset.inc.xhtml
        #include browser-dialog.inc.xhtml

        <html:div id="mount">
            <ul id="tabslist">
                
            </ul>
            
            <div id="tabspanel">
                
            </div>
        </html:div>

        <html:div id="a11y-announcement" role="alert"/>
    </html:body>
</html>